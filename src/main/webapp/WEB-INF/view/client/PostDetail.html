<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi ti·∫øt b√†i vi·∫øt - TFT</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.6.1/dist/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/client/css/Header.css}" rel="stylesheet" />
    <link th:href="@{/client/css/LeftSidebar.css}" rel="stylesheet" />
    <link th:href="@{/client/css/Home.css}" rel="stylesheet" />
    <link th:href="@{/client/css/RedditPost.css}" rel="stylesheet" />
    <link th:href="@{/client/css/PostDetail.css}" rel="stylesheet" />
    <link th:href="@{/client/css/DarkMode.css}" rel="stylesheet" />
</head>

<body>

    <script th:src="@{/client/js/TimeUtils.js}"></script>
    <script th:src="@{/client/js/Header.js}"></script>
    <script th:src="@{/client/js/LeftSidebar.js}"></script>

    <!-- Include header fragment -->
    <div th:replace="~{fragments/Header :: user-header}"></div>

    <div class="post-detail-container">

        <!-- Include left sidebar fragment -->
        <div th:replace="~{fragments/Left-Sidebar :: left-sidebar}"></div>

        <main class="post-detail-main">
            <!-- Breadcrumb -->
            <nav class="breadcrumb-nav">
                <a href="/home" class="breadcrumb-link">üè† Trang ch·ªß</a>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span class="breadcrumb-current">Chi ti·∫øt b√†i vi·∫øt</span>
            </nav>

            <!-- Main Post Card -->
            <div class="post-detail-card">
                <!-- Post Header -->
                <div class="post-header">
                    <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=Admin" alt="Admin" class="post-user-avatar">
                    <div class="post-user-info">
                        <div class="post-user-name-row">
                            <a href="/profile/admin" class="post-user-name">Nguy·ªÖn VƒÉn Admin</a>
                            <button class="post-follow-btn">‚Ä¢ Theo d√µi</button>
                        </div>
                        <div class="post-time-privacy">
                            <span class="post-time">2 gi·ªù tr∆∞·ªõc</span>
                            <span>‚Ä¢</span>
                            <svg class="post-privacy-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                            </svg>
                            <span>C√¥ng khai</span>
                        </div>
                    </div>
                    <div class="post-header-actions">
                        <button class="post-menu-btn" onclick="togglePostMenu(event, '1')">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Post Content -->
                <div class="post-detail-content">
                    <span class="post-category-tag">üéâ C√¥ng ngh·ªá</span>
                    <h1 class="post-detail-title">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi h·ªá th·ªëng m·∫°ng x√£ h·ªôi m·ªõi!</h1>
                    <div class="post-detail-text">
                        <p>Th·ª≠ c√°c t√≠nh nƒÉng m·ªõi: Nh·∫•n gi·ªØ n√∫t th√≠ch ƒë·ªÉ xem emoji reactions, b√¨nh lu·∫≠n, chia s·∫ª v√† l∆∞u b√†i vi·∫øt. Thi·∫øt k·∫ø hi·ªán ƒë·∫°i theo phong c√°ch c√°c m·∫°ng x√£ h·ªôi ph·ªï bi·∫øn!</p>
                        <p>Ch√∫ng t√¥i ƒë√£ t√≠ch h·ª£p nhi·ªÅu t√≠nh nƒÉng th√∫ v·ªã:</p>
                        <ul>
                            <li>‚ú® Emoji reactions ƒëa d·∫°ng</li>
                            <li>üí¨ H·ªá th·ªëng b√¨nh lu·∫≠n l·ªìng nhau</li>
                            <li>üì§ Chia s·∫ª linh ho·∫°t</li>
                            <li>üé® Giao di·ªán hi·ªán ƒë·∫°i, d·ªÖ s·ª≠ d·ª•ng</li>
                            <li>üåô Dark mode m∆∞·ª£t m√†</li>
                        </ul>
                        <p>H√£y kh√°m ph√° v√† tr·∫£i nghi·ªám ngay nh√©! üöÄ</p>
                    </div>
                </div>
                
                <img src="https://images.unsplash.com/photo-1516116216624-53e697fedbea?w=1200" alt="Post image" class="post-detail-image">
                
                <!-- Post Stats -->
                <div class="post-stats-bar">
                    <div class="post-stats-left">
                        <div class="post-reactions-preview">
                            <span class="reaction-icon-small">‚ù§Ô∏è</span>
                            <span class="reaction-icon-small">üëç</span>
                            <span class="reaction-icon-small">üòÇ</span>
                        </div>
                        <span class="post-likes-count" onclick="showLikersModal()">B·∫°n v√† 141 ng∆∞·ªùi kh√°c</span>
                    </div>
                    <div class="post-stats-right">
                        <span class="post-stat-item">42 b√¨nh lu·∫≠n</span>
                        <span class="post-stat-item">28 chia s·∫ª</span>
                    </div>
                </div>

                <!-- Post Actions -->
                <div class="post-action-buttons">
                    <button class="action-btn post-like-btn" data-post-id="1" onmouseenter="showReactions(event)" onmouseleave="hideReactions(event)">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                        <span>Th√≠ch</span>
                        <div class="reactions-popup">
                            <span class="reaction-emoji" onclick="selectReaction(event, '1', '‚ù§Ô∏è')">‚ù§Ô∏è</span>
                            <span class="reaction-emoji" onclick="selectReaction(event, '1', 'üëç')">üëç</span>
                            <span class="reaction-emoji" onclick="selectReaction(event, '1', 'üòÇ')">üòÇ</span>
                            <span class="reaction-emoji" onclick="selectReaction(event, '1', 'üòÆ')">üòÆ</span>
                            <span class="reaction-emoji" onclick="selectReaction(event, '1', 'üò¢')">üò¢</span>
                            <span class="reaction-emoji" onclick="selectReaction(event, '1', 'üò†')">üò†</span>
                        </div>
                    </button>
                    <button class="action-btn">
                        <svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                        <span>B√¨nh lu·∫≠n</span>
                    </button>
                    <button class="action-btn" onclick="sharePost()">
                        <svg viewBox="0 0 24 24"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8M16 6l-4-4-4 4M12 2v13"/></svg>
                        <span>Chia s·∫ª</span>
                    </button>
                </div>
            </div>

            <!-- Comments Section -->
            <div class="comments-section">
                <div class="comments-header">
                    <h2 class="comments-title">üí¨ B√¨nh lu·∫≠n (42)</h2>
                    <select class="comments-sort">
                        <option value="top">N·ªïi b·∫≠t nh·∫•t</option>
                        <option value="new">M·ªõi nh·∫•t</option>
                        <option value="old">C≈© nh·∫•t</option>
                    </select>
                </div>

                <!-- Comment Input -->
                <div class="comment-input-wrapper">
                    <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=CurrentUser" alt="You" class="comment-avatar">
                    <div class="comment-input-box">
                        <textarea class="comment-textarea" placeholder="Vi·∫øt b√¨nh lu·∫≠n c·ªßa b·∫°n..." rows="1"></textarea>
                        <div class="comment-input-actions">
                            <div class="comment-input-tools">
                                <button class="comment-tool-btn" title="Emoji">üòä</button>
                                <button class="comment-tool-btn" title="·∫¢nh">üì∑</button>
                                <button class="comment-tool-btn" title="GIF">GIF</button>
                            </div>
                            <button class="comment-submit-btn">ƒêƒÉng</button>
                        </div>
                    </div>
                </div>

                <!-- Comments List -->
                <div class="comments-list">
                    
                    <!-- Comment 1 (Top Level) -->
                    <div class="comment-item" data-comment-id="c1">
                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User1" alt="User1" class="comment-avatar">
                        <div class="comment-content">
                            <div class="comment-header">
                                <a href="/profile/user1" class="comment-author">Tr·∫ßn Th·ªã H∆∞∆°ng</a>
                                <span class="comment-time">1 gi·ªù tr∆∞·ªõc</span>
                            </div>
                            <div class="comment-text">
                                Thi·∫øt k·∫ø r·∫•t ƒë·∫πp v√† hi·ªán ƒë·∫°i! M√¨nh th√≠ch ph·∫ßn emoji reactions nh·∫•t üòç
                            </div>
                            <div class="comment-actions">
                                <button class="comment-action-btn liked">
                                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                    Th√≠ch (23)
                                </button>
                                <button class="comment-action-btn" onclick="showReplyBox('c1')">
                                    <svg viewBox="0 0 24 24"><path d="M9 11l-6 6v-6H1V1h18v10h-8l-2 2z"/></svg>
                                    Tr·∫£ l·ªùi
                                </button>
                                <button class="comment-action-btn">
                                    <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
                                </button>
                            </div>

                            <!-- Nested Replies -->
                            <div class="comment-replies">
                                <!-- Reply 1.1 -->
                                <div class="comment-item reply-item">
                                    <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=Admin" alt="Admin" class="comment-avatar">
                                    <div class="comment-content">
                                        <div class="comment-header">
                                            <a href="/profile/admin" class="comment-author">Nguy·ªÖn VƒÉn Admin</a>
                                            <span class="comment-badge author-badge">T√°c gi·∫£</span>
                                            <span class="comment-time">45 ph√∫t tr∆∞·ªõc</span>
                                        </div>
                                        <div class="comment-text">
                                            <span class="reply-mention">@Tr·∫ßn Th·ªã H∆∞∆°ng</span> C·∫£m ∆°n b·∫°n! Ch√∫ng m√¨nh s·∫Ω ti·∫øp t·ª•c c·∫£i thi·ªán ƒë·ªÉ mang ƒë·∫øn tr·∫£i nghi·ªám t·ªët nh·∫•t üí™
                                        </div>
                                        <div class="comment-actions">
                                            <button class="comment-action-btn">
                                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                                Th√≠ch (8)
                                            </button>
                                            <button class="comment-action-btn" onclick="showReplyBox('c1')">
                                                <svg viewBox="0 0 24 24"><path d="M9 11l-6 6v-6H1V1h18v10h-8l-2 2z"/></svg>
                                                Tr·∫£ l·ªùi
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Reply 1.2 -->
                                <div class="comment-item reply-item">
                                    <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User3" alt="User3" class="comment-avatar">
                                    <div class="comment-content">
                                        <div class="comment-header">
                                            <a href="/profile/user3" class="comment-author">L√™ VƒÉn Minh</a>
                                            <span class="comment-time">30 ph√∫t tr∆∞·ªõc</span>
                                        </div>
                                        <div class="comment-text">
                                            ƒê·ªìng √Ω! UX/UI r·∫•t m∆∞·ª£t m√† üëå
                                        </div>
                                        <div class="comment-actions">
                                            <button class="comment-action-btn">
                                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                                Th√≠ch (5)
                                            </button>
                                            <button class="comment-action-btn" onclick="showReplyBox('c1')">
                                                <svg viewBox="0 0 24 24"><path d="M9 11l-6 6v-6H1V1h18v10h-8l-2 2z"/></svg>
                                                Tr·∫£ l·ªùi
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Show more replies button -->
                                <button class="show-more-replies">
                                    <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                                    Xem th√™m 2 ph·∫£n h·ªìi
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Comment 2 -->
                    <div class="comment-item" data-comment-id="c2">
                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User2" alt="User2" class="comment-avatar">
                        <div class="comment-content">
                            <div class="comment-header">
                                <a href="/profile/user2" class="comment-author">Ph·∫°m ƒê·ª©c Anh</a>
                                <span class="comment-time">2 gi·ªù tr∆∞·ªõc</span>
                            </div>
                            <div class="comment-text">
                                M√¨nh c√≥ th·ªÉ d√πng th·ª≠ kh√¥ng? Code c√≥ open source kh√¥ng ·∫°? ü§î
                            </div>
                            <div class="comment-actions">
                                <button class="comment-action-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                    Th√≠ch (12)
                                </button>
                                <button class="comment-action-btn" onclick="showReplyBox('c2')">
                                    <svg viewBox="0 0 24 24"><path d="M9 11l-6 6v-6H1V1h18v10h-8l-2 2z"/></svg>
                                    Tr·∫£ l·ªùi
                                </button>
                                <button class="comment-action-btn">
                                    <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Comment 3 -->
                    <div class="comment-item" data-comment-id="c3">
                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User4" alt="User4" class="comment-avatar">
                        <div class="comment-content">
                            <div class="comment-header">
                                <a href="/profile/user4" class="comment-author">Ho√†ng Th·ªã Mai</a>
                                <span class="comment-time">3 gi·ªù tr∆∞·ªõc</span>
                            </div>
                            <div class="comment-text">
                                Qu√° tuy·ªát v·ªùi! Ch√∫c m·ª´ng team ƒë√£ l√†m ra s·∫£n ph·∫©m n√†y üéâüéä
                            </div>
                            <div class="comment-actions">
                                <button class="comment-action-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                                    Th√≠ch (7)
                                </button>
                                <button class="comment-action-btn" onclick="showReplyBox('c3')">
                                    <svg viewBox="0 0 24 24"><path d="M9 11l-6 6v-6H1V1h18v10h-8l-2 2z"/></svg>
                                    Tr·∫£ l·ªùi
                                </button>
                                <button class="comment-action-btn">
                                    <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Load More Comments -->
                <button class="load-more-comments">
                    <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M12 6v6l4 2"/></svg>
                    Xem th√™m b√¨nh lu·∫≠n
                </button>
            </div>

        </main>

        <!-- Right Sidebar - Related Posts -->
        <aside class="post-detail-sidebar">
            <div class="sidebar-widget">
                <h3 class="widget-title">üìå B√†i vi·∫øt li√™n quan</h3>
                <div class="related-posts">
                    
                    <a href="/post/2" class="related-post-item">
                        <img src="https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=200" alt="Related" class="related-post-img">
                        <div class="related-post-info">
                            <div class="related-post-title">Tips h·ªçc l·∫≠p tr√¨nh hi·ªáu qu·∫£</div>
                            <div class="related-post-meta">89 l∆∞·ª£t th√≠ch ‚Ä¢ 28 b√¨nh lu·∫≠n</div>
                        </div>
                    </a>

                    <a href="/post/3" class="related-post-item">
                        <img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=200" alt="Related" class="related-post-img">
                        <div class="related-post-info">
                            <div class="related-post-title">D·ª± √°n m·∫°ng x√£ h·ªôi ƒë·∫ßu ti√™n</div>
                            <div class="related-post-meta">256 l∆∞·ª£t th√≠ch ‚Ä¢ 67 b√¨nh lu·∫≠n</div>
                        </div>
                    </a>

                    <a href="/post/4" class="related-post-item">
                        <img src="https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=200" alt="Related" class="related-post-img">
                        <div class="related-post-info">
                            <div class="related-post-title">React 19: Nh·ªØng thay ƒë·ªïi quan tr·ªçng</div>
                            <div class="related-post-meta">2.1k l∆∞·ª£t th√≠ch ‚Ä¢ 312 b√¨nh lu·∫≠n</div>
                        </div>
                    </a>

                </div>
            </div>

            <div class="sidebar-widget">
                <h3 class="widget-title">üë• Ng∆∞·ªùi b·∫°n c√≥ th·ªÉ bi·∫øt</h3>
                <div class="suggested-users">
                    
                    <div class="suggested-user-item">
                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=Suggest1" alt="User" class="suggested-user-avatar">
                        <div class="suggested-user-info">
                            <div class="suggested-user-name">Nguy·ªÖn VƒÉn A</div>
                            <div class="suggested-user-mutual">3 b·∫°n chung</div>
                        </div>
                        <button class="suggested-user-btn">Th√™m</button>
                    </div>

                    <div class="suggested-user-item">
                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=Suggest2" alt="User" class="suggested-user-avatar">
                        <div class="suggested-user-info">
                            <div class="suggested-user-name">Tr·∫ßn Th·ªã B</div>
                            <div class="suggested-user-mutual">7 b·∫°n chung</div>
                        </div>
                        <button class="suggested-user-btn">Th√™m</button>
                    </div>

                </div>
            </div>
        </aside>

    </div>

    <script>
        // Reactions
        let reactionTimer;
        function showReactions(event) {
            const btn = event.currentTarget;
            const popup = btn.querySelector('.reactions-popup');
            if (popup) {
                clearTimeout(reactionTimer);
                reactionTimer = setTimeout(() => popup.classList.add('active'), 500);
            }
        }

        function hideReactions(event) {
            clearTimeout(reactionTimer);
            const btn = event.currentTarget;
            const popup = btn.querySelector('.reactions-popup');
            if (popup) setTimeout(() => popup.classList.remove('active'), 200);
        }

        function selectReaction(event, postId, emoji) {
            event.stopPropagation();
            const btn = event.target.closest('.post-like-btn');
            const span = btn.querySelector('span');
            btn.classList.add('liked');
            span.textContent = emoji + ' ' + getReactionName(emoji);
            const popup = btn.querySelector('.reactions-popup');
            if (popup) popup.classList.remove('active');
        }

        function getReactionName(emoji) {
            const names = {'‚ù§Ô∏è': 'Y√™u th√≠ch', 'üëç': 'Th√≠ch', 'üòÇ': 'Haha', 'üòÆ': 'Wow', 'üò¢': 'Bu·ªìn', 'üò†': 'Ph·∫´n n·ªô'};
            return names[emoji] || 'Th√≠ch';
        }

        function togglePostMenu(event, postId) {
            event.stopPropagation();
            // Menu logic here
        }

        function showLikersModal() {
            alert('Hi·ªÉn th·ªã danh s√°ch ng∆∞·ªùi ƒë√£ th√≠ch');
        }

        function sharePost() {
            alert('Chia s·∫ª b√†i vi·∫øt');
        }

        function showReplyBox(commentId) {
            alert('Hi·ªÉn th·ªã form tr·∫£ l·ªùi cho comment: ' + commentId);
        }

        // Comment textarea auto-expand
        document.querySelector('.comment-textarea').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Sort comments
        document.querySelector('.comments-sort').addEventListener('change', function() {
            console.log('S·∫Øp x·∫øp b√¨nh lu·∫≠n theo:', this.value);
        });
    </script>

</body>

</html>
