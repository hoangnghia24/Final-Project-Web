<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT - Bạn bè</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.6.1/dist/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/client/css/Profile.css}" rel="stylesheet" />
    <link th:href="@{/client/css/Header.css}" rel="stylesheet" />
    <link th:href="@{/client/css/LeftSidebar.css}" rel="stylesheet" />
    <link th:href="@{/client/css/Home.css}" rel="stylesheet" />
    <link th:href="@{/client/css/Notifications.css}" rel="stylesheet" />
    <link th:href="@{/client/css/FriendRequests.css}" rel="stylesheet" />
    <link th:href="@{/client/css/DarkMode.css}" rel="stylesheet" />
</head>

<body>

    <!-- Include header fragment -->
    <div th:replace="~{fragments/Header :: user-header}"></div>
    <!-- Include left sidebar fragment -->
    <div th:replace="~{fragments/Sidebar :: Sidebar}"></div>
    <div class="home-container">

        <main class="main-feed friends-main">
            <!-- Sticky Container for Header + Tabs -->
            <div class="friends-sticky-container">
                <!-- Friends Page Header -->
                <div class="friends-header">
                    <h1 class="friends-title">Bạn bè</h1>
                    <div class="friends-search-bar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" id="friends-search-input" placeholder="Tìm kiếm bạn bè...">
                    </div>
                </div>

                <!-- Friends Navigation Tabs -->
                <div class="friends-tabs">
                    <button class="friends-tab active" data-tab="all-friends">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                        </svg>
                        <span>Tất cả bạn bè</span>
                        <span class="tab-count" id="all-friends-count">0</span>
                    </button>

                    <button class="friends-tab" data-tab="friend-requests">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                            <circle cx="19" cy="6" r="5" fill="#ff4757" />
                        </svg>
                        <span>Lời mời kết bạn</span>
                        <span class="tab-count badge-count" id="friend-requests-count">0</span>
                    </button>

                    <button class="friends-tab" data-tab="suggestions">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span>Gợi ý kết bạn</span>
                    </button>
                </div>
            </div>

            <!-- All Friends Section -->
            <div class="friends-content-section active" id="all-friends-section">
                <div class="friends-filter">
                    <button class="filter-btn active" data-filter="all">Tất cả</button>
                    <button class="filter-btn" data-filter="online">Đang hoạt động</button>
                    <button class="filter-btn" data-filter="recent">Mới kết bạn</button>
                </div>

                <div class="friends-grid" id="all-friends-grid">
                    <!-- Friend cards will be loaded here -->
                    <div class="friends-loading">
                        <div class="loading-spinner"></div>
                        <p>Đang tải danh sách bạn bè...</p>
                    </div>
                </div>
            </div>

            <!-- Friend Requests Section -->
            <div class="friends-content-section" id="friend-requests-section">
                <div class="section-header">
                    <h2>Lời mời kết bạn</h2>
                    <span class="section-subtitle" id="requests-subtitle">Bạn có 0 lời mời kết bạn</span>
                </div>

                <div class="friend-requests-grid" id="friend-requests-grid">
                    <!-- Friend request cards will be loaded here -->
                    <div class="friends-loading">
                        <div class="loading-spinner"></div>
                        <p>Đang tải lời mời kết bạn...</p>
                    </div>
                </div>
            </div>

            <!-- Friend Suggestions Section -->
            <div class="friends-content-section" id="suggestions-section">
                <div class="section-header">
                    <h2>Những người bạn có thể biết</h2>
                    <span class="section-subtitle">Dựa trên bạn chung và sở thích</span>
                </div>

                <div class="friends-suggestions-grid" id="suggestions-grid">
                    <!-- Suggestion cards will be loaded here -->
                    <div class="friends-loading">
                        <div class="loading-spinner"></div>
                        <p>Đang tải gợi ý kết bạn...</p>
                    </div>
                </div>
            </div>

        </main>

        <!-- Right Sidebar - Friend Requests Summary -->
        <aside class="right-sidebar">
            <div class="friends-sidebar-widget">
                <div class="widget-header">
                    <h3 class="widget-title">Lời mời kết bạn</h3>
                    <a href="#" class="view-all-link" id="view-all-requests">Xem tất cả</a>
                </div>

                <div class="sidebar-requests-list" id="sidebar-requests-list">
                    <!-- Mini friend request cards will be loaded here -->
                    <div class="no-requests">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        <p>Không có lời mời kết bạn</p>
                    </div>
                </div>
            </div>

            <div class="friends-sidebar-widget">
                <div class="widget-header">
                    <h3 class="widget-title">Gợi ý kết bạn</h3>
                </div>

                <div class="sidebar-suggestions-list" id="sidebar-suggestions-list">
                    <!-- Mini suggestion cards will be loaded here -->
                </div>
            </div>
        </aside>

    </div>

    <!-- Scripts -->
    <script th:src="@{/client/js/TimeUtils.js}"></script>
    <script th:src="@{/client/js/Header.js}"></script>
    <script th:src="@{/client/js/Notifications.js}"></script>
    <script th:src="@{/client/js/FriendRequests.js}"></script>
</body>

</html>